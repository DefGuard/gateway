[package]
name = "defguard-gateway"
version = "0.3.0"
edition = "2021"

[features]
boringtun = ["dep:boringtun"]

[dependencies]
async-stream = "0.3"
base64 = "0.13"
boringtun = { version = "0.4", optional = true }
chrono = "0.4"
clap = { version = "3.2", features = ["derive", "env"] }
env_logger = "0.9"
log = "0.4"
prost = "0.11"
syslog = "6.0"
thiserror = "1.0"
tonic = {version = "0.8", features = ["gzip", "tls", "tls-roots"] }
tokio = { version = "1", features = ["macros", "rt-multi-thread"] }
tokio-stream = { version = "0.1", features = [] }

[dev-dependencies]
tokio = { version = "1", features = ["io-std", "io-util"] }

[build-dependencies]
tonic-build = { version = "0.8" }

[target.'cfg(target_os = "linux")'.dependencies]
netlink-packet-core = "0.4"
netlink-packet-generic = "0.3"
netlink-packet-route = "0.11"
netlink-packet-wireguard = "0.2"
netlink-sys = "0.8"

[profile.release]
lto = "thin"
strip = "debuginfo"
